<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>City Match Tool â€“ Space Coast</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  .result { border: 1px solid #ccc; padding: 12px; margin: 12px 0; border-radius: 6px; }
  .good { color: green; }
  .warn { color: orange; }
  .bad { color: red; }
  .meta { font-size: 0.9em; color: #555; }
</style>
</head>

<body>

<h1>Best Matching Cities</h1>
<button onclick="calculate()">Calculate Matches</button>

<div id="results"></div>

<script>
/* ------------------------------
   QUESTION SETUP
-------------------------------- */
const WEIGHT = 0.1;

const OPTION_VALUES = {
  q1: { A:1, B:2, C:3, D:4 },
  q2: { A:1, B:2, C:3, D:4 },
  q3: { A:3, B:2, C:1 },
  q4: { A:4, B:3, C:2, D:1 },
  q5: { A:4, B:3, C:2, D:1 },
  q6: { A:3, B:2, C:1 },
  q7: { A:3, B:2, C:1 },
  q8: { A:3, B:3, C:2, D:1 },
  q9: { A:1, B:2, C:3 },
  q10:{ A:1, B:2, C:3, D:4 }
};

const MAX_DIFF = {
  q1:3, q2:3, q3:2, q4:3, q5:3,
  q6:2, q7:2, q8:2, q9:2, q10:3
};

const TRAITS = {
  q1:"pace of life", q2:"social activity", q3:"structure",
  q4:"cost of living", q5:"density", q6:"climate",
  q7:"outdoor lifestyle", q8:"cultural variety",
  q9:"social openness", q10:"career focus"
};

/* ------------------------------
   DEFAULT PROFILE
-------------------------------- */
const DEFAULT = {
  q1:2.5,q2:2.5,q3:2,q4:2.5,q5:2.5,
  q6:2,q7:2,q8:2,q9:2,q10:2.5
};

/* ------------------------------
   CITY PROFILES
-------------------------------- */
const CITIES = {
  "Palm Bay, FL": {
    profile:{q1:1.75,q2:1.75,q3:1.75,q4:2,q5:1.25,q6:3,q7:2.5,q8:1.25,q9:1.25,q10:1.75},
    age:"40sâ€“50s",
    family:"medium",
    why:"Quiet pace, low density, and lifestyle-first living."
  },
  "Viera, FL": {
    profile:{q1:2.75,q2:2.5,q3:3,q4:3,q5:2.25,q6:3,q7:2.25,q8:1.75,q9:2,q10:3.25},
    age:"30sâ€“40s",
    family:"high",
    why:"Planned structure with strong career and family support."
  },
  "Rockledge, FL": {
    profile:{q1:2.5,q2:2.25,q3:2.5,q4:2.75,q5:2,q6:3,q7:2.25,q8:1.75,q9:1.75,q10:2.75},
    age:"40sâ€“50s",
    family:"high",
    why:"Balanced suburban life with stability and convenience."
  },
  "Melbourne (Mainland), FL": {
    profile:{q1:2.75,q2:3,q3:2.5,q4:2.75,q5:2.5,q6:3,q7:2.5,q8:2.5,q9:2.25,q10:3},
    age:"30sâ€“40s",
    family:"high",
    why:"Social energy, cultural access, and strong job base."
  },
  "Cocoa Beach, FL": {
    profile:{q1:3,q2:3,q3:2.5,q4:3,q5:2.5,q6:3,q7:3,q8:2.5,q9:2,q10:2.5},
    age:"30sâ€“40s",
    family:"low",
    why:"Flexible, social, and tourism-driven coastal lifestyle."
  }
};

/* ------------------------------
   USER ANSWERS (demo defaults)
-------------------------------- */
function getUserAnswers() {
  // demo: all neutral B
  const u = {};
  for (let q in OPTION_VALUES) u[q] = OPTION_VALUES[q].B;
  return u;
}

/* ------------------------------
   CALCULATION
-------------------------------- */
function calculate() {
  const user = getUserAnswers();
  const maxDist = Math.sqrt(Object.keys(MAX_DIFF)
    .reduce((s,q)=>s+WEIGHT*(MAX_DIFF[q]**2),0));

  const output = [];

  for (let city in CITIES) {
    let distSq = 0;
    let warnings = [];

    for (let q in OPTION_VALUES) {
      const p = CITIES[city].profile[q] ?? DEFAULT[q];
      const diff = Math.abs(user[q] - p);
      distSq += WEIGHT * diff * diff;

      if (diff >= 2) warnings.push({q, level:"bad"});
      else if (diff >= 1.25) warnings.push({q, level:"warn"});
    }

    const match = (1 - Math.sqrt(distSq) / maxDist) * 100;
    output.push({city, match, warnings});
  }

  output.sort((a,b)=>b.match-a.match);
  render(output);
}

/* ------------------------------
   RENDER
-------------------------------- */
function render(results) {
  const div = document.getElementById("results");
  div.innerHTML = "";

  results.forEach(r => {
    const c = CITIES[r.city];
    const warnLevel =
      r.warnings.length >= 3 ? "bad" :
      r.warnings.length === 2 ? "warn" : "good";

    div.innerHTML += `
      <div class="result">
        <h3>${r.city} â€” ${r.match.toFixed(1)}%</h3>
        <p>${c.why}</p>

        <p class="meta">ğŸ‘¥ Age group: ${c.age}</p>
        <p class="meta">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family friendly: ${c.family}</p>

        <p class="${warnLevel}">
          ${warnLevel==="good"?"âœ… Strong fit":
            warnLevel==="warn"?"âš ï¸ Consider carefully":
            "ğŸš« Potential poor fit"}
        </p>

        ${r.warnings.slice(0,3).map(w =>
          `<p class="${w.level}">
            ${w.level==="bad"?"ğŸš«":"âš ï¸"} ${TRAITS[w.q]}
          </p>`
        ).join("")}
      </div>
    `;
  });
}
</script>

</body>
</html>
